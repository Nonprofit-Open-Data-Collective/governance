<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="governance">
<title>Download 990 Efile Data • governance</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Download 990 Efile Data">
<meta property="og:description" content="governance">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">governance</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/governance.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Nonprofit-Open-Data-Collective/governance/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Download 990 Efile Data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Nonprofit-Open-Data-Collective/governance/blob/HEAD/vignettes/download-data.Rmd" class="external-link"><code>vignettes/download-data.Rmd</code></a></small>
      <div class="d-none name"><code>download-data.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Nonprofit-Open-Data-Collective/governance" class="external-link">governance</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<p>This is a vignette to show you how to download the raw 990 data
needed to generate factor scores.</p>
<div class="section level2">
<h2 id="identify-relevant-990-efiler-variables">Identify relevant 990 efiler variables<a class="anchor" aria-label="anchor" href="#identify-relevant-990-efiler-variables"></a>
</h2>
<p>We first list all questions in the 990 series that are needed to
generate the governance scores.</p>
<p>See other vignette for how we picked these ones.</p>
<p>See <a href="https://nonprofit-open-data-collective.github.io/irs990efile/data-dictionary/data-dictionary.html#f990-part-04-table-00-required-schedules" class="external-link">the
NCCS website</a> for a comprehensive list of all 900 efiler variable
names.</p>
<table class="table">
<colgroup>
<col width="18%">
<col width="18%">
<col width="31%">
<col width="31%">
</colgroup>
<thead><tr class="header">
<th>Part/Schedule</th>
<th>Variable Name</th>
<th>990 Item Name</th>
<th>Question asked on 990</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Part 4</td>
<td>F9_04_AFS_IND_X</td>
<td>F990-PC-PART-04-LINE-12A</td>
<td>Independent audited financial statements?</td>
</tr>
<tr class="even">
<td>Part 4</td>
<td>F9_04_AFS_CONSOL_X</td>
<td>F990-PC-PART-04-LINE-12B</td>
<td>Consolidated audited financial statement?</td>
</tr>
<tr class="odd">
<td>Part 4</td>
<td>F9_04_BIZ_TRANSAC_DTK_X</td>
<td>F990-PC-PART-04-LINE-28A</td>
<td>Was the organization a party to a business transaction with one of
the following parties: A current former officer, director, trustee, or
key employee?</td>
</tr>
<tr class="even">
<td>Part 4</td>
<td>F9_04_BIZ_TRANSAC_DTK_FAM_X</td>
<td>F990-PC-PART-04-LINE-28B</td>
<td>Was the organization a party to a business transaction with one of
the following parties: A family member of a current or former officer,
director, trustee, or key employee?</td>
</tr>
<tr class="odd">
<td>Part 4</td>
<td>F9_04_BIZ_TRANSAC_DTK_ENTITY_X</td>
<td>F990-PC-PART-04-LINE-28C</td>
<td>Was the organization a party to a business transaction with one of
the following parties: An entity of which a current or former officer,
director, trustee, or key employee (or a family member thereof) was an
officer, director, trustee, or direct, or indirect owner?</td>
</tr>
<tr class="even">
<td>Part 4</td>
<td>F9_04_CONTR_NONCSH_MT_25K_X</td>
<td>F990-PC-PART-04-LINE-29</td>
<td>Did the organization receive more than $25,000 in non-cash
contributions?</td>
</tr>
<tr class="odd">
<td>Part 4</td>
<td>F9_04_CONTR_ART_HIST_X</td>
<td>F990-PC-PART-04-LINE-30</td>
<td>Did the organization receive contributions of art, historical
treasures, or other similar assets, or qualified conservation
contributions?</td>
</tr>
<tr class="even">
<td>Part 6</td>
<td>F9_06_GVRN_NUM_VOTING_MEMB</td>
<td>F990-PC-PART-01-LINE-03</td>
<td>Number voting members governing body</td>
</tr>
<tr class="odd">
<td>Part 6</td>
<td>F9_06_GVRN_NUM_VOTING_MEMB_IND</td>
<td>F990-PC-PART-01-LINE-04</td>
<td>Number independent voting members</td>
</tr>
<tr class="even">
<td>Part 6</td>
<td>F9_06_GVRN_DELEGATE_MGMT_DUTY_X</td>
<td>F990-PC-PART-06-SECTION-A-LINE-03</td>
<td>Delegation of management duties?</td>
</tr>
<tr class="odd">
<td>Part 6</td>
<td>F9_06_GVRN_DOC_GVRN_BODY_X</td>
<td>F990-PC-PART-06-SECTION-A-LINE-08A</td>
<td>Minutes of governing body?</td>
</tr>
<tr class="even">
<td>Part 6</td>
<td>F9_06_POLICY_FORM990_GVRN_BODY_X</td>
<td>F990-PC-PART-06-SECTION-B-LINE-11A</td>
<td>Form 990 provided to governing body?</td>
</tr>
<tr class="odd">
<td>Part 6</td>
<td>F9_06_POLICY_COI_X</td>
<td>F990-PC-PART-06-SECTION-B-LINE-12A</td>
<td>Organization have conflict of interest policy?</td>
</tr>
<tr class="even">
<td>Part 6</td>
<td>F9_06_POLICY_COI_DISCLOSURE_X</td>
<td>F990-PC-PART-06-SECTION-B-LINE-12B</td>
<td>Annual disclosure of interests by covered persons?</td>
</tr>
<tr class="odd">
<td>Part 6</td>
<td>F9_06_POLICY_COI_MONITOR_X</td>
<td>F990-PC-PART-06-SECTION-B-LINE-12C</td>
<td>Regular monitoring and enforcement?</td>
</tr>
<tr class="even">
<td>Part 6</td>
<td>F9_06_POLICY_WHSTLBLWR_X</td>
<td>F990-PC-PART-06-SECTION-B-LINE-13</td>
<td>Whistleblower policy?</td>
</tr>
<tr class="odd">
<td>Part 6</td>
<td>F9_06_POLICY_DOC_RETENTION_X</td>
<td>F990-PC-PART-06-SECTION-B-LINE-14</td>
<td>Organization has written document retention policy?</td>
</tr>
<tr class="even">
<td>Part 6</td>
<td>F9_06_POLICY_COMP_PROCESS_CEO_X</td>
<td>F990-PC-PART-06-SECTION-B-LINE-15A</td>
<td>Compensation process CEO?</td>
</tr>
<tr class="odd">
<td>Part 6</td>
<td>F9_06_DISCLOSURE_AVBL_OTH_X</td>
<td>F990-PC-PART-06-SECTION-C-LINE-18</td>
<td>Form available Other (explain in Schedule O)</td>
</tr>
<tr class="even">
<td>Part 6</td>
<td>F9_06_DISCLOSURE_AVBL_OTH_WEB_X</td>
<td>F990-PC-PART-06-SECTION-C-LINE-18</td>
<td>Form990 Part VI - Own website</td>
</tr>
<tr class="odd">
<td>Part 6</td>
<td>F9_06_DISCLOSURE_AVBL_REQUEST_X</td>
<td>F990-PC-PART-06-SECTION-C-LINE-18</td>
<td>Form available upon request</td>
</tr>
<tr class="even">
<td>Part 6</td>
<td>F9_06_DISCLOSURE_AVBL_OWN_WEB_X</td>
<td>F990-PC-PART-06-SECTION-C-LINE-18</td>
<td>Form990 Part VI - Other website</td>
</tr>
<tr class="odd">
<td>Part 12</td>
<td>F9_12_FINSTAT_METHOD_ACC_OTH</td>
<td>F990-PC-PART-12-LINE-01</td>
<td>Indicates method of accounting is other</td>
</tr>
<tr class="even">
<td>Part 12</td>
<td>F9_12_FINSTAT_METHOD_ACC_ACCRU_X</td>
<td>F990-PC-PART-12-LINE-01</td>
<td>Method of accounting - Accrua</td>
</tr>
<tr class="odd">
<td>Part 12</td>
<td>F9_12_FINSTAT_METHOD_ACC_CASH_X</td>
<td>F990-PC-PART-12-LINE-01;</td>
<td>Method of accounting - Cash</td>
</tr>
<tr class="even">
<td>Schedule M</td>
<td>SM_01_REVIEW_PROCESS_UNUSUAL_X</td>
<td>SCHED-M-PART-01-LINE-31</td>
<td>Review process reference unusual noncash gifts?</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="downloading-the-data">Downloading the data<a class="anchor" aria-label="anchor" href="#downloading-the-data"></a>
</h2>
<p>There are two methods for downloading the data. The first is
downloaded the data sets directly from the NCCS website. This method is
fast to do, but downloads much more data than you need to calculate a
governance score. The second method is to download the data with the <a href="https://cran.r-project.org/web/packages/data.table/index.html" class="external-link">data.table</a>
package in R. This method is more complicated to implement, but it only
downloads the data needed to calculate a governance score.</p>
<div class="section level3">
<h3 id="downloading-data-from-nccs-website-direcetly">Downloading Data from NCCS Website Direcetly<a class="anchor" aria-label="anchor" href="#downloading-data-from-nccs-website-direcetly"></a>
</h3>
<p>All 990 Efiler data is hosted on the NCCS Website <a href="https://nccs.urban.org/nccs/catalogs/catalog-efile.html" class="external-link">here</a>.</p>
<p>The data here is organized be Part/Schedule, then by year. For our
purposes, we only need Part 4, Part 6, Part 12, and Schedule M. Then for
each Part/Schedule, you can click the “download” button for the relevant
year(s). Once the data is downloaded, you can use the columns
““OBJECTID”, “URL”, “RETURN_VERSION”, and “ORG_EIN” as unique
identifiers to bind the data together.</p>
</div>
<div class="section level3">
<h3 id="downloading-data-using-r">Downloading Data using R<a class="anchor" aria-label="anchor" href="#downloading-data-using-r"></a>
</h3>
<p>To download the data through R, we first identify which years we are
interested in. For this example, say we are interested in years 2013 and
2014.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">years</span> <span class="op">&lt;-</span> <span class="fl">2013</span><span class="op">:</span><span class="fl">2014</span></span></code></pre></div>
<p>We then see from the <a href="https://nccs.urban.org/nccs/catalogs/catalog-efile.html" class="external-link">NCCS
Website</a> that the data Part/Schedule download links are structured
as</p>
<blockquote>
<p><a href="https://nccs-efile.s3.us-east-1.amazonaws.com/parsed/F9-PARTNUMBER-TABLENUMBER-TABLENAME-YEAR.csv" class="external-link uri">https://nccs-efile.s3.us-east-1.amazonaws.com/parsed/F9-PARTNUMBER-TABLENUMBER-TABLENAME-YEAR.csv</a></p>
</blockquote>
<p>Using this link structure and the variable names we identified in the
previous section, we can download the data as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### Part IV ----------------------------------------</span></span>
<span><span class="co">#initialize data</span></span>
<span><span class="va">dat_4</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"list"</span>, length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">years</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#get columns we want </span></span>
<span><span class="va">keep_cols_part4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OBJECTID"</span>, <span class="st">"URL"</span>, <span class="st">"RETURN_VERSION"</span>, <span class="st">"ORG_EIN"</span>, <span class="st">"RETURN_TYPE"</span>, </span>
<span>                     <span class="st">"F9_04_AFS_IND_X"</span>, <span class="st">"F9_04_AFS_CONSOL_X"</span>,</span>
<span>                     <span class="st">"F9_04_BIZ_TRANSAC_DTK_X"</span>, <span class="st">"F9_04_BIZ_TRANSAC_DTK_FAM_X"</span>,</span>
<span>                     <span class="st">"F9_04_BIZ_TRANSAC_DTK_ENTITY_X"</span>,</span>
<span>                     <span class="st">"F9_04_CONTR_NONCSH_MT_25K_X"</span>, </span>
<span>                     <span class="st">"F9_04_CONTR_ART_HIST_X"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#download the data</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">years</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">link</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"https://nccs-efile.s3.us-east-1.amazonaws.com/parsed/F9-P04-T00-REQUIRED-SCHEDULES-"</span>, <span class="va">years</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="st">".csv"</span><span class="op">)</span></span>
<span>  <span class="va">temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="va">link</span>, select <span class="op">=</span> <span class="va">keep_cols_part4</span><span class="op">)</span> </span>
<span>  <span class="va">dat_4</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">temp</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#clean up data</span></span>
<span><span class="va">dat_all_4</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/rbindlist.html" class="external-link">rbindlist</a></span><span class="op">(</span><span class="va">dat_4</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span> year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">RETURN_VERSION</span>, <span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Part VI  ----------------------------------------</span></span>
<span><span class="co">#initialize data</span></span>
<span><span class="va">dat_6</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"list"</span>, length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">years</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#get columns we want </span></span>
<span>  <span class="va">keep_cols_part6</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OBJECTID"</span>, <span class="st">"URL"</span>, <span class="st">"RETURN_VERSION"</span>, <span class="st">"ORG_EIN"</span>, <span class="st">"RETURN_TYPE"</span>, </span>
<span>                       <span class="st">"F9_06_GVRN_NUM_VOTING_MEMB"</span>,</span>
<span>                       <span class="st">"F9_06_GVRN_NUM_VOTING_MEMB_IND"</span>, </span>
<span>                       <span class="st">"F9_06_GVRN_DTK_FAMBIZ_RELATION_X"</span>, </span>
<span>                       <span class="st">"F9_06_GVRN_DELEGATE_MGMT_DUTY_X"</span>,</span>
<span>                       <span class="st">"F9_06_GVRN_DOC_GVRN_BODY_X"</span>,</span>
<span>                       <span class="st">"F9_06_POLICY_FORM990_GVRN_BODY_X"</span>,</span>
<span>                       <span class="st">"F9_06_POLICY_COI_X"</span>,</span>
<span>                       <span class="st">"F9_06_POLICY_COI_DISCLOSURE_X"</span>,</span>
<span>                       <span class="st">"F9_06_POLICY_COI_MONITOR_X"</span>,</span>
<span>                       <span class="st">"F9_06_POLICY_WHSTLBLWR_X"</span>,</span>
<span>                       <span class="st">"F9_06_POLICY_DOC_RETENTION_X"</span>,</span>
<span>                       <span class="st">"F9_06_POLICY_COMP_PROCESS_CEO_X"</span>,</span>
<span>                       <span class="st">"F9_06_DISCLOSURE_AVBL_OTH_X"</span>,</span>
<span>                       <span class="st">"F9_06_DISCLOSURE_AVBL_OTH_WEB_X"</span>,</span>
<span>                       <span class="st">"F9_06_DISCLOSURE_AVBL_REQUEST_X"</span>,</span>
<span>                       <span class="st">"F9_06_DISCLOSURE_AVBL_OWN_WEB_X"</span></span>
<span>                       <span class="op">)</span></span>
<span></span>
<span><span class="co">#download the data</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">years</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">link</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"https://nccs-efile.s3.us-east-1.amazonaws.com/parsed/F9-P06-T00-GOVERNANCE-"</span>, <span class="va">years</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="st">".csv"</span><span class="op">)</span></span>
<span>  <span class="va">temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="va">link</span>, select <span class="op">=</span> <span class="va">keep_cols_part6</span><span class="op">)</span> </span>
<span>  <span class="va">dat_6</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">temp</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#clean up data</span></span>
<span><span class="va">dat_all_6</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/rbindlist.html" class="external-link">rbindlist</a></span><span class="op">(</span><span class="va">dat_6</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span> year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">RETURN_VERSION</span>, <span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co">### Part XII ----------------------------------------</span></span>
<span></span>
<span><span class="co">#initialize data</span></span>
<span><span class="va">dat_12</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"list"</span>, length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">years</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#keep the columns we want</span></span>
<span><span class="va">keep_cols_part12</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OBJECTID"</span>, <span class="st">"URL"</span>, <span class="st">"RETURN_VERSION"</span>, <span class="st">"ORG_EIN"</span>,<span class="st">"RETURN_TYPE"</span>, </span>
<span>                      <span class="st">"F9_12_FINSTAT_METHOD_ACC_OTH"</span>,</span>
<span>                      <span class="st">"F9_12_FINSTAT_METHOD_ACC_ACCRU_X"</span>, </span>
<span>                      <span class="st">"F9_12_FINSTAT_METHOD_ACC_CASH_X"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">#download the data </span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">years</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">link</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"https://nccs-efile.s3.us-east-1.amazonaws.com/parsed/F9-P12-T00-FINANCIAL-REPORTING-"</span>, <span class="va">years</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="st">".csv"</span><span class="op">)</span></span>
<span>  <span class="va">temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="va">link</span>, select <span class="op">=</span> <span class="va">keep_cols_part12</span><span class="op">)</span> </span>
<span>  <span class="va">dat_12</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">temp</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#clean up data</span></span>
<span><span class="va">dat_all_12</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/rbindlist.html" class="external-link">rbindlist</a></span><span class="op">(</span><span class="va">dat_12</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span> year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">RETURN_VERSION</span>, <span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">### Schedule M --------------------------------------</span></span>
<span><span class="co">#initialize data</span></span>
<span><span class="va">dat_M</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"list"</span>, length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">years</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#get columns we want </span></span>
<span><span class="va">keep_cols_partM</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OBJECTID"</span>, <span class="st">"URL"</span>, <span class="st">"RETURN_VERSION"</span>, <span class="st">"ORG_EIN"</span>, <span class="st">"RETURN_TYPE"</span>, </span>
<span>                     <span class="st">"SM_01_REVIEW_PROCESS_UNUSUAL_X"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#download data</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">years</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">link</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"https://nccs-efile.s3.us-east-1.amazonaws.com/parsed/SM-P01-T00-NONCASH-CONTRIBUTIONS-"</span>, <span class="va">years</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="st">".csv"</span><span class="op">)</span></span>
<span>  <span class="va">temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="va">link</span>, select <span class="op">=</span> <span class="va">keep_cols_partM</span><span class="op">)</span> </span>
<span>  <span class="va">dat_M</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">temp</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#clean up data</span></span>
<span><span class="va">dat_all_M</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/rbindlist.html" class="external-link">rbindlist</a></span><span class="op">(</span><span class="va">dat_M</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span> year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">RETURN_VERSION</span>, <span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">years</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Once we have all of the data from each part downloaded, we can merge
the parts together. Additionally, we remove an EZ filers since their
data will be incomplete for our purposes.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vars.bind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OBJECTID"</span>, <span class="st">"URL"</span>, <span class="st">"RETURN_VERSION"</span>, <span class="st">"ORG_EIN"</span>, <span class="st">"year"</span>, <span class="st">"RETURN_TYPE"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat_govern</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">dat_all_4</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">dat_all_6</span>, by <span class="op">=</span> <span class="va">vars.bind</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">dat_all_12</span>, by <span class="op">=</span> <span class="va">vars.bind</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">dat_all_M</span>, by <span class="op">=</span> <span class="va">vars.bind</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">RETURN_TYPE</span> <span class="op">!=</span> <span class="st">"990EZ"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Olivia Beck, Jesse Lecy, Urban Inistitue National Center for Charitable Statistics.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
